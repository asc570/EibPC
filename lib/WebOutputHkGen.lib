// WebOutHkGen() shows Hk Parameters via a Weboutput()
//
// input:
// - HkName:      Name of the Hk as shown in the WebOutput()
// - ID:          the WebOutput(ID)[]
// - GA_Vl        GA of Vorlauf Temp
// - GA_Rl        Ga of Ruecklauf Temp
// - GA_HkModeReq Requested Hk Mode in UVR1611 u16
// - Ga_HkModeAct Actuel Hk Mode in UVR1611 u16
// - GA_PID       Burner PID in 16u
// - GA_bPump     Pump Status (running?) b1
// - GA_wbFrost    Warning: Frost b1
// - GA_bGenHzON   Heatingting system general status ON/OFF

:begin SpWebOutHkGen( HkName,Id,GaVl,GaRl,GaHkModeReq,GA_HkModeAct,GaPID,GabPump,GawbFrost, GabGenHzON )
:var strON@
strON@   = $ON$

:var strOFF@
strOFF@  = $OFF$

:var strTitle@
strTitle@ = HkName

:var strPump@
strPump@  = $?$


:var html@


:var STARTDELAY@
STARTDELAY@    = 2000u64


:var strTemp@
strTemp@ = $nil$

html@ =  $     <style  >                \\
                                                   \\
    body{                                          \\
         font-size: 14px;                          \\
    }                                              \\
    .head{                                         \\
        margin:0 0 0 0;                            \\
                                                   \\
                                                   \\
    }                                              \\
    .line{                                         \\
        display:flex;                              \\
        width:100%;                                \\
        align-content: space-between;              \\
        background-color: DodgerBlue;              \\
    }                                              \\
    .col1  {                                       \\
        flex: 0 0 7em;                             \\
        background-color: lightgrey;               \\
    }                                              \\
    .col2 {                                        \\
        flex: 0 0 7em;                             \\
        background-color: lightgrey;                   \\
    }                                              \\
    .col3{                                         \\
        flex: 0 0 7em;                             \\
        background-color: lightgrey;               \\
    }                                              \\
    .col4{                                         \\
        flex: 0 0 7em;                             \\
        background-color: lightgrey;                   \\
    }                                              \\
    .col5{                                         \\
        flex: 0 0 7em;                             \\
        background-color: lightgrey    }           \\
                                                   \\
    #Hz{                                           \\
        background-color : lightgrey;              \\
        font-wieght : bold;                        \\
    }                                              \\
                                                  \\
    #Status{                                      \\
        color : blue;                             \\
    }                                             \\
    #VlRl{                                        \\
        color : orange;                           \\
        font-weight : bold;                       \\
    }                                             \\
    #Tsoll{                                       \\
        color : green;                            \\
        font-weight : bold;                       \\
    }                                             \\
    #PID{                                         \\
        color : green;                            \\
        font-weight : bold;                       \\
    }                                             \\
    #Mode{                                        \\
        color : green;                            \\
        font-weight :bold;                        \\
    }                                             \\
    #OverTemp{                                    \\
        color : red;                              \\
        font-weight :bold;                        \\
    }                                             \\
    #Pump{                                        \\
        color : blue;                             \\
    }                                             \\
    #Frost{                                       \\
        color : red;                              \\
        font-weight : bold                        \\
    }                                             \\
                                             \\
    </style>                                       \\
                                                   \\
       <h3 id = Hz class= head  >FBH EG</h2>     \\
    <div id= vlrl  class= line >                   \\
        <div id =  Status  class= col1 >           \\
            OFF        </div>                      \\
        <div id =  VlRl  class =  col2  >          \\
            28C / 26C                              \\
        </div >                                    \\
        <div id= Tsoll  class =  col3  >           \\
           27C                                     \\
        </div>                                     \\
         <div class =  col4  id= PID >             \\
            21%                                    \\
        </div>                                     \\
    </div>                                         \\
    <div class =  line >                           \\
        <div id =  Mode  class =  col1  >          \\
            HIGH                                   \\
        </div>                                     \\
        <div id =  OverTemp  class =  col2  >      \\
            OverTemp                               \\
        </div>                                     \\
        <div id =  Pump  class =  col3  >          \\
            Pump                                   \\
        </div>                                     \\
        <div id =  Frost  class =  col4  >         \\
            Frost                                  \\
        </div>                                     \\
    </div>$c6000 


if after(systemstart(), STARTDELAY@) or   \\
   event(GaVl) or                         \\
   event(GaRl) or                         \\
   event( GabPump)                        \\
   then{

   strTemp@ =  stringformat(convert( GaVl,0f16 ) ,4,3,2,0 ) + $C / $ +    \\
               stringformat(convert( GaRl,0f16 ) ,4,3,2,0 ) + $C$ ;

   if GabPump then{
      strPump@=   strON@ 
      }endif ;
  if !GabPump then{
      strPump@ =  strOFF@ 
      }endif ;

//   strTemp@ = stringformat( GaVl /148u16 , 0,3,3,3)+$% / $ + stringformat( GaRl /148u16 , 0,3,3,3)+$%$;
  
   weboutput( Id,html@ )

 }endif
:end
